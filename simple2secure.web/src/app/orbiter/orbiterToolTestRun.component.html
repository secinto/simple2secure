<h3 mat-dialog-title>Run new test {{tool.tool.name}}</h3>

<div mat-dialog-content>
    <form #testRunForm="ngForm" (ngSubmit)="submitTestRun()">
        <div>

            <mat-form-field>
                <mat-select [(ngModel)]="selectedTest" name="test" placeholder="{{ 'test.select' | translate }}"
                            (change)="onSelectChange()">
                    <mat-option *ngFor="let t of tool.templates" [value]="t">
                        {{t.name}}
                    </mat-option>
                </mat-select>
            </mat-form-field>

            <div class="form-group" *ngIf="selectedTest">
                <button mat-raised-button id="addCommand" type="button" [disabled]="loading" (click)="addCommand()"
                        class="btn-sm btn-info
				pull-right mat-green-button"><i class="glyphicon glyphicon-plus"></i> {{ 'button.addCommand' |
                    translate }}
                </button>

                <p>{{ 'table.commands' | translate }}</p>

                <div *ngFor="let cmd of selectedTest.commands; let in=index" ngModelGroup="commands">
                    <legend>{{cmd.content}}</legend>

                    <div class="form-group">
                        <mat-form-field class="full_width_input">
                            <input type="text" matInput placeholder="{{ 'table.name' | translate }}"
                                   [(ngModel)]="selectedTest.commands[in].content" name="content{{in}}">
                            <mat-icon matSuffix class="mat-icon-green">mode_edit</mat-icon>
                        </mat-form-field>
                    </div>

                </div>
            </div>
        </div>
    </form>
</div>
<div mat-dialog-actions>
    <button mat-button [disabled]="!testRunForm.dirty" mat-raised-button class="mat-green-button" color="primary"
            (click)="submitTestRun()">{{ 'button.save' | translate }}
    </button>
    <button class="mat-red-button" type="button" mat-raised-button color="warn" [mat-dialog-close]="tool"
            cdkFocusInitial>{{ 'button.cancel' | translate }}
    </button>
</div>
