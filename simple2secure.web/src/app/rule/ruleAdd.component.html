<h3 mat-dialog-title>{{ 'button.addRule' | translate }}</h3>

<mat-button-toggle-group [value]="toggle" (change)="toggleView($event)">
    <mat-button-toggle [value]= "template" aria-label="Text align left">
        template
    </mat-button-toggle>
    <mat-button-toggle [value]="expert" aria-label="Text align center">
        expert
    </mat-button-toggle>
</mat-button-toggle-group>

<table class="full_width_input" cellspacing="0">
    <tr>
        <td>
            <mat-form-field class="full_width_input">
                <input matInput type="text" placeholder="{{ 'table.name' | translate }}"
                       [(ngModel)]="rule.name"
                       name="name" autocomplete='given-name' required>
            </mat-form-field>
        </td>
    </tr>
</table>
<table class="full_width_input" cellspacing="0">
    <tr>
        <td>
            <mat-form-field class="full_width_input">
                <input matInput type="text" placeholder="{{ 'table.description' | translate }}"
                       [(ngModel)]="rule.description" name="description" autocomplete='family-name' required>
            </mat-form-field>
        </td>
    </tr>
</table>

<div *ngIf="toggle == 'template'">

    Condition Templates

    <div class="example-container mat-elevation-z8">
        <table mat-table [dataSource]="conditionsDataSource">

            <!-- Checkbox Column -->
            <ng-container matColumnDef="selected">
                <th mat-header-cell *matHeaderCellDef> Select </th>

                <td mat-cell *matCellDef="let row">
                    <mat-radio-button>                                                                                   <!-- TODO: loading specific param boxes for the choosen condition -->
                    </mat-radio-button>
                </td>
            </ng-container>

            <!-- Name -->
            <ng-container matColumnDef="name">
                <th mat-header-cell *matHeaderCellDef> {{ 'table.name' | translate }} </th>
                <td mat-cell *matCellDef="let condition"> {{condition.name}} </td>
            </ng-container>

            <!-- Description Column -->
            <ng-container matColumnDef="description">
                <th mat-header-cell *matHeaderCellDef> {{ 'table.description' | translate }} </th>
                <td mat-cell *matCellDef="let condition"> {{condition.description_en}} </td>                             <!-- TODO: support multiple language -->
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="conditionsDisplayedColumns; sticky: true"></tr>
            <tr mat-row *matRowDef="let row; columns: conditionsDisplayedColumns;"></tr>
        </table>
    </div>

    Action Templates

    <div class="example-container mat-elevation-z8">
        <table mat-table [dataSource]="actionsDataSource">

            <!-- Checkbox Column -->
            <ng-container matColumnDef="selected">
                <th mat-header-cell *matHeaderCellDef> Select </th>

                <td mat-cell *matCellDef="let row">
                    <mat-radio-button>                                                                                   <!-- TODO: loading specific param boxes for the choosen action -->
                    </mat-radio-button>
                </td>
            </ng-container>

            <!-- Name -->
            <ng-container matColumnDef="name">
                <th mat-header-cell *matHeaderCellDef> {{ 'table.name' | translate }} </th>
                <td mat-cell *matCellDef="let action"> {{action.name}} </td>
            </ng-container>

            <!-- Description Column -->
            <ng-container matColumnDef="description">
                <th mat-header-cell *matHeaderCellDef> {{ 'table.description' | translate }} </th>
                <td mat-cell *matCellDef="let action"> {{action.description_en}} </td>                                   <!-- TODO: support multiple language -->
            </ng-container>


            <tr mat-header-row *matHeaderRowDef="actionsDisplayedColumns; sticky: true"></tr>
            <tr mat-row *matRowDef="let row; columns: actionsDisplayedColumns;"></tr>
        </table>
    </div>

</div>

<div *ngIf="toggle == 'expert'">

    <div #ace_editor  ace-editor
         [(text)]="rule.groovyCode"
         [mode]="'groovy'"
         [theme]="'eclipse'"
         [readOnly]="false"
         [autoUpdateContent]="true">
    </div>
</div>
<!-- [disabled]="!ruleForm.dirty" -->
<div mat-dialog-actions>
    <form #ruleForm="ngForm" >
        <button mat-button mat-raised-button class="mat-green-button" color="primary"
                (click)="saveRule()">{{ 'button.save' | translate }}
        </button>
        <button class="mat-red-button" type="button" mat-raised-button color="warn" [mat-dialog-close]="rule"
                cdkFocusInitial>{{ 'button.cancel' | translate }}
        </button>
    </form>
</div>




