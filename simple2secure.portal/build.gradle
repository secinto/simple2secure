buildscript {
	ext { springBootVersion = '1.5.7.RELEASE' }
	repositories {
		maven { url "https://plugins.gradle.org/m2/" }
		maven { url 'https://jitpack.io' }
		maven { url 'https://repo.spring.io/libs-snapshot' }
		mavenCentral()
	}
	dependencies { classpath "org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}" }
}

apply plugin: 'java'
apply plugin: 'application'
apply plugin: 'eclipse'
apply plugin: 'eclipse-wtp'
apply plugin: 'org.springframework.boot'
apply plugin: 'io.spring.dependency-management'
apply plugin: 'war'

sourceCompatibility = 1.8
targetCompatibility = 1.8
repositories {
	flatDir { dirs 'libs' }
	mavenCentral()
	jcenter()
}

jar {
	baseName = 'simple2secure-portal'
	version =  '0.1.0-SNAPSHOT'
}

task wrapper(type: Wrapper) { gradleVersion = '3.4.1' }

compileJava {
	options.warnings = false
	options.deprecation = false
	options.encoding = 'UTF-8'
	options.compilerArgs += ["-Xdoclint:none", "-Xlint:none", "-nowarn"]
}

war { baseName = 's2s' }

dependencies {
	providedRuntime 'org.springframework.boot:spring-boot-starter-tomcat'
	compile 'com.google.guava:guava:21.0'
	compile 'org.slf4j:slf4j-api:1.7.25'
	compile 'ch.qos.logback:logback-classic:1.2.3'
	compile group: 'commons-io', name: 'commons-io', version: '2.5'
	compile group: 'com.google.code.gson', name: 'gson', version: '2.8.1'
	compile group: 'io.jsonwebtoken', name: 'jjwt', version: '0.2'
	compile 'org.springframework.boot:spring-boot-starter-web:1.5.7.RELEASE'
	compile 'org.springframework.boot:spring-boot-starter-data-mongodb:1.5.7.RELEASE'
	compile 'org.springframework.boot:spring-boot-starter-security:1.5.7.RELEASE'
	compile 'org.springframework.boot:spring-boot-devtools:1.5.7.RELEASE'
	compile group: 'org.springframework.boot', name: 'spring-boot-starter-mail', version: '1.5.7.RELEASE'
	compile group: 'ro.fortsoft.licensius', name: 'licensius', version: '0.1.1'
	compile group: 'ch.qos.cal10n', name: 'cal10n-api', version: '0.8.1'
	compile group: 'org.apache.httpcomponents', name: 'httpclient', version: '4.5.5'
	compile group: 'io.kubernetes', name: 'client-java', version: '2.0.0'
	compile group: 'ch.maxant', name: 'rules', version: '2.2.1'
	compile group: 'org.apache.commons', name: 'commons-compress', version: '1.17'

	testCompileOnly(
			'junit:junit:4.12',
			'org.springframework.boot:spring-boot-starter-test'
			)
	testImplementation(
			'org.junit.jupiter:junit-jupiter-api:5.1.0'
			)
	testRuntimeOnly(
			'org.junit.jupiter:junit-jupiter-engine:5.1.0',
			'org.junit.vintage:junit-vintage-engine:5.1.0'
			)

	compile project(':simple2secure.api')
	compile project(':simple2secure.commons')
}

//test { useJUnitPlatform() }